import{e as I}from"./RenderComponent-db07d835.js";import{H as _,A as N,e as R,_ as S,j as u,ah as i,o as U,c as b,V as o,P as t,a as n,T as s,ay as z,az as T}from"./@vue-0daf1ea7.js";import{_ as A}from"./vue-esign-f156a8ae.js";import"./index-c8a40200.js";import"./element-plus-358f1f6c.js";import"./lodash-es-21c98b27.js";import"./@vueuse-bf974c13.js";import"./@element-plus-cc41ec1b.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f21ac596.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-593301b5.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-72671fae.js";import"./sass-ebba05cd.js";import"./immutable-21295e6e.js";import"./vue-i18n-0230cf60.js";import"./@intlify-1d841f54.js";import"./mitt-f7ef348c.js";const B=l=>(z("data-v-690fe373"),l=l(),T(),l),L=B(()=>n("div",{class:"el-upload__text"},[s("拖拽上传或"),n("em",null,"点击上传")],-1)),j={class:"dialog-footer"},E=_({name:"admin/file/upload"}),H=_({...E,props:{title:{type:String,default:""}},setup(l,{expose:m}){const f=N("getToken"),c=R(),e=S({showDialog:!1,sureLoading:!1,fileDirectory:"bpm",fileReName:!0,fileList:[]}),g=u(()=>({}).VITE_API_URL+"/api/admin/file/upload-file"),h=u(()=>({Authorization:"Bearer "+f()})),v=async(a={})=>{e.showDialog=!0},y=(a,d,p)=>{a!=null&&a.success&&I.emit("refreshFile",a.data)},w=async()=>{c.value.clearFiles(["success","fail"])},x=()=>{e.showDialog=!1},D=async()=>{c.value.submit(),e.showDialog=!1};return m({open:v}),(a,d)=>{const p=i("UploadFilled"),k=i("el-icon"),C=i("el-upload"),r=i("el-button"),V=i("el-dialog");return U(),b("div",null,[o(V,{modelValue:e.showDialog,"onUpdate:modelValue":d[0]||(d[0]=F=>e.showDialog=F),title:l.title,draggable:"",width:"600px"},{footer:t(()=>[n("span",j,[o(r,{onClick:w,size:"default"},{default:t(()=>[s("清空已上传")]),_:1}),o(r,{onClick:x,size:"default"},{default:t(()=>[s("取 消")]),_:1}),o(r,{type:"primary",onClick:D,size:"default",loading:e.sureLoading},{default:t(()=>[s("确 定")]),_:1},8,["loading"])])]),default:t(()=>[n("div",null,[o(C,{ref_key:"uploadRef",ref:c,action:g.value,headers:h.value,data:{fileDirectory:e.fileDirectory,fileReName:e.fileReName},drag:"",multiple:"","auto-upload":!1,"on-success":y},{default:t(()=>[o(k,{class:"el-icon--upload"},{default:t(()=>[o(p)]),_:1}),L]),_:1},8,["action","headers","data"])])]),_:1},8,["modelValue","title"])])}}});const ce=A(H,[["__scopeId","data-v-690fe373"]]);export{ce as default};
